<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF and Text Pattern Reader</title>
    
     {% load static %}
    <link rel="stylesheet" href="{% static 'css/stylesheet.css' %}">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">


    <style>
        textarea::placeholder{
            font-size: 24px;
        }
        textarea{
            font-size: 24px;
        }

    </style>


</head>
<body>

<header type = "header" name = "h1">

    <h2> Accraft </h2>
    <section>

    <button2 type="button" onclick = "window.location.href = 'about.html'"> About </button2>
    <button2 type="button" onclick = "window.location.href = 'index.html'"> Home </button2>
    </section>

</header>

<main>
<div>

     <form action="/application" id="fileForm" method="POST" enctype="multipart/form-data">
         {% csrf_token %}
        <label for="file">Choose a file:</label>
        <input type="file" id="file" name="file" required accept=".pdf, .txt">
         <br>
        <button type="submit">Upload</button>
    </form>
    </div>

    <br><br>

    <div>
    <label style="font-size:24px "> OR copy and paste the pattern here: </label>
    <form id="textForm" name="textForm">
        <textarea type="text" id="patternText" name="patternText" rows="10" cols="50" title="Form for text input of pattern" placeholder="place pattern here" required></textarea>
        <br>
        <button type="submit">Submit</button>
    </form>

        <div id="resultLocation">
    <pre id="result"> This is where the results go</pre>
            
            </div>
        

    <script type="module">
        let dictionary = crochetDictionary
        
        //for text input.
        document.getElementById("textForm").addEventListener("submit", function(event){
            event.preventDefault()
                const textarea = document.getElementById("patternText");
                let output = textarea.value
                event.preventDefault()
                changeAndDisplay(output)
                event.preventDefault()

            })
        
        
        function changeAndDisplay(output) {
            console.log(output)
            for (const key in dictionary) {
                let regex = new RegExp( "\\b" + key + "\\b", 'gi')
                console.log(regex)
                output = output.replace(regex, dictionary[key])
                console.log(output)
            }
           
            document.getElementById("result").innerHTML = output;

        }
    </script>
    
    
    



    <script>
    document.getElementById('fileForm').addEventListener('submit', function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
      console.log('File content:', e.target.result);
    };
  }
});
    </script>


</div>
</main>

</body>

<script>
    crochetDictionary = 
        {
"alt" : "alternate",
"approx": "approximately",
  "beg": "begin",
"bet":	"between",
"BL": "back loop or back loop only",
  "BLO":"back loop or back loop only",
"bo":"bobble",
"BP":"back post",
"BPdc":	"back post double crochet",
"BPdtr":"back post double treble crochet",
"BPhdc":	"back post half double crochet",
"BPsc":	"back post single crochet",
"BPtr":	"back post treble crochet",
"CC":	"contrasting color",
"ch":	"chain stitch",
"ch-":	"chain space number",
"ch-sp":	"chain space",
"CL":	"cluster",
"cont":	"continue",
"dc":	"double crochet",
"dc2tog":	"double crochet 2 stitches together",
"dec":	"decrease",
"dtr":	"double treble crochet",
"edc":	"extended double crochet",
"ehdc":	"extended half double crochet",
"esc":	"extended single crochet",
"etr":	"extended treble crochet",
  "FL": "front loop",
  "FLO": "front loop only",
  "foll": "following",
  "FP": "front post",
  "FPdc": "front post double crochet",
  "FPdtr": "front post double treble crochet",
  "FPhdc": "front post half double crochet",
  "FPsc": "front post single crochet",
  "FPtr": "front post treble crochet",
  "hdc": "half double crochet",
  "hdc2tog": "half double crochet 2 stitches together",
  "inc": "increase",
  "lp": "loop",
  "m": "marker",
  "MC": "main color",
"pat":	"pattern",
  "patt": "pattern",
  "pc": "popcorn stitch",
  "pm": "place marker",
  "prev": "previous",
"ps":"puff stitch",
  "puff": "puff stitch",
"rem":	"remaining",
  "rep": "repeat",
"rnd":	"round",
"RS":	"right side",
  "rs": "right side",
  "sc": "single crochet",
  "sc2tog": "single crochet 2 stitches together",
"sh":	"shell",
  "sk": "skip",
"sl st":	"slip stitch", 
            "slst": "slip stitch",
  "sm": "slip marker",
  "sl m": "slip marker",
"sp": "space",
"st":"stitch",
  "tbl":
  "through back loop",
  "tch": "turning chain",
  "t-ch": "turning chain",
"tog":	"together",
"tr":	"treble crochet",
"tr2tog":	"treble crochet 2 stitches together",
"trtr":	"triple treble crochet",
"WS":	"wrong side",
"yo":	"yarn over",
"yoh":	"yarn over hook"
    }
    
</script>
</html>